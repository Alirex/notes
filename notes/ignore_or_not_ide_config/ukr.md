# Ігнорувати чи зберігати налаштування IDE у репозиторії?

Зараз іде мова саме про налаштування для IDE від JetBrains.
Наприклад: PyCharm, WebStorm, RustRover тощо.
І, відповідно, тека (каталог) `.idea`.

Але деякі принципи можуть бути застосовані й при роботі з іншими IDE.

---

# Ігнорувати повністю і завжди

Це те, що я колись чув і виконував.

Чому це може мати сенс? Як аргументують за це рішення?

## Аргументи за повне ігнорування

### Файли/теки, що не мають відношення до коду.

Так, менше речей, на які потрібно звертати увагу.

### Прив'язка до IDE. Конфлікти й шум. Персоналізовані налаштування користувача.

Навіщо ця тека, якщо з проєктом можуть взаємодіяти через інші IDE?
Хтось із JetBrains, хтось із VSCode, хтось із NeoVim.

Деякі файли можуть дуже сильно змінюватись. А їх вплив не відчутний.

Якщо зберігати ці налаштування, то щось може бути не так, як хоче конкретний користувач/розробник.
І це обмежує свободу.

---

# Зберігати. Повністю чи частково

Ішов час. І мені потрібно було взаємодіяти з різними проєктами.
Я дещо помітив і змінив стратегію для себе.
І раджу іншим іти подібним шляхом.

## Проблеми без конфігурації

### Повторне розгортання репозиторію.

Іноді мені було потрібно розгортати той самий репозиторій декілька разів на різних машинах у межах невеликого відрізка
часу. Чи навіть на одній і тій самій машині.

Іноді було потрібно розгортати декілька невеликих репозиторіїв.

І, за відсутності конфігурації для IDE — потрібно налаштовувати все знову.

На щастя, деякі речі можуть бути автоматично розпізнані IDE. Але це не завжди. І можуть бути особливі налаштування саме
у проєкті.

Тож без збереженої конфігурації потрібно робити знову те ж саме.

Так, деякі речі все одно доводиться робити вручну після розгортання.
Але їх менше.
І те, що залишилось, можна винести у Readme та/чи в команди (commands) для проєкту (через Just/Make/etc).

На жаль, деякі речі починають відчуватися тільки через деякий час.
І можуть бути зовсім не відчутні в таких випадках:

- проєкти рівня "hello world"
- write-only проєкти (написав і забув)
- робота з одним проєктом на одній машині в одній системі довгий час

## Обробка заперечень

### Файли/теки, що не мають відношення до коду.

Так, зі збереженням цих налаштувань з'являється ще одна тека (іноді більше).

Але проєкт і так розростається кількістю файлів. Наприклад:

- readme
- .gitignore
- docker-related (Dockerfile, dockerignore, compose, etc)
- CI/CD (github actions, etc)
- pre-commit hooks
- керування залежностями
- тощо

Тобто, ця тека не особливо вплине на ситуацію.

А саме файли з кодом може не кидати прямо в корінь проєкту. А організувати їх у спеціальну теку.

#### Python

Наприклад, для Python, можна скористатися flat-layout із текою зі всіма файлами.

Ще краще, можна використовувати src-layout. Краще розділення коду від оточення.

У просунутому варіанті можна скористатися workspace-layout із src-layout всередині. Дозволяє ще краще розділяти
функціонал на шматочки.

Додатково про види організації проєктів на Python:

- [src layout vs flat layout (Official)](https://packaging.python.org/en/latest/discussions/src-layout-vs-flat-layout/)
- [Workspaces by uv](https://docs.astral.sh/uv/concepts/projects/workspaces/)
- [Python Application Layouts: A Reference (Real Python)](https://realpython.com/python-application-layouts/)
- [Structuring Your Project (The Hitchhiker's Guide to Python) (Outdated)](https://docs.python-guide.org/writing/structure/)

### Прив'язка до IDE. Конфлікти й шум. Персоналізовані налаштування користувача.

Якщо хтось користується іншою IDE, то в нього просто не використовуються ці налаштування. І все.
Можна додати налаштування і для іншої IDE.
Є гарний шанс, що вони будуть просто лежати в різних теках без конфліктів.

Хоча використання однакової IDE може дуже спростити взаємодію у команді й деякі процеси.
Особливо, якщо потрібно додати новачка-початківця у команду.

І підтримка конфігурацій під декілька IDE ускладнює процес.

Так, деякі налаштування дійсно не має сенсу зберігати. І, на щастя, частина з них уже може бути покрита самою IDE.

Наприклад у `.idea` є згенерований файл `.gitignore`. Що вже ігнорує деякі елементи.

Якісь додаткові речі, за необхідністю, можна також додати до ігнорування туди, чи у центральний `.gitignore`.
Наприклад, конфігурації якихось плагінів. Якщо вважаєте, що вони не повинні бути ті самі для всіх.

Хоча я якраз хотів би, щоб деякі плагіни були у всієї команди розробників і саме з однаковими налаштуваннями.
І, в особливості, я б хотів, щоб вони були тиж самими при кожному розгортанні репозиторію.

Якщо йде мова про персональний пет-проєкт чи академічна задача, то едине джерело конфліктів і шуму — це автор. Можна
додати все. І підлаштувати під себе, якщо потрібно.

Якщо йде мова про якусь групову задачу, то можна підлаштувати під команду.
По замовченню зберегти все.
І потім заігнорувати й видалити з історії те, що заважає і шумить.

Інший варіант — це дещо інвертувати gitignore. І ігнорувати все, окрім потрібного.
У якомусь сенсі, це найкращий і найпотужніший варіант.
І якщо є бажання, є сенс організувати саме його.
Але, саме в цьому випадку, стратегія "Додати все та ігнорувати щось за необхідністю" мені здається найпростішою і
зручною.

## Користь від збереженої конфігурації

Усе це буде втрачено, чи потрібно налаштовувати кожного разу, якщо не зберігати конфігурацію IDE.

### Розмітка проєкту (Mark directory as ...)

У проєкті можуть бути особливі види тек. Наприклад:

- src
  - теки із джерельним кодом. І їх може бути декілька в одному репозиторії.
- excluded
  - теки, які не повинні індексуватися IDE.
    - Специфічне для мови: venv, node_modules, target etc
    - Специфічне для проєкту. Якісь особливі теки.
- templates
  - Актуально для деяких фреймворків. Наприклад: Django.
- etc

Дещо знаходиться само. Але не завжди.

І якщо конфігурація зберігається, то не потрібно ще раз уручну розмічати всі ті теки за ролями.

Так, код буде працювати й без розмітки. Але IDE може допомогти з деякими речами.

### Конфігурації запуску (Run/Debug Configurations)

Буває корисно зберегти для повторного використання конфігурацію для запуску якогось додатка.
Наприклад, для налагодження через IDE.

І це може бути доволі часто. Тож хай воно буде доступне всім із самого початку роботи з проєктом.

Як варіант, може бути збережена конфігурація як шаблон. Який можно скопіювати та підлаштувати під конкретний випадок.

На щастя, у конфігурації запуску можна вказати, зберігати її у проєкті, чи ні. Можна навіть обрати шлях для збереження.

### Налаштування стилю коду

Якщо у проєкті є певні вимоги до стилю коду, то можна зберегти відповідні налаштування.

Так, краще, щоб стиль коду підтримувався форматером/лінтером.

Частина особливих налаштувань може робитися через файл [.editorconfig](https://editorconfig.org/).

Але, якщо є щось особливе, і щоб форматер IDE не конфліктував із зовнішнім, і якщо недостатньо editorconfig, то можна це
зберегти.

### Налаштування плагінів

Для деяких плагінів краще, якщо налаштування будуть збережені хоча б для проєкту.

Наприклад, плагін для форматування/лінтінгу на базі інструменту [ruff](https://plugins.jetbrains.com/plugin/20574-ruff)

### Інші налаштування

Можуть бути й інші налаштування, які краще зберегти.

---

# Висновок

Я раджу зберігати конфігурації IDE щодо проєкту в репозиторії.

Так, чим більше розробників буде залучено у проєкт, тим ретельніше може бути потрібно підходити до налаштування і
фільтрації того, що зберігається.

Але, спираючись на це, буде простіше повторно відтворювати потрібне середовище.

І, імовірно, простіше залучувати нових людей у команду.
Особливо, коли є можливість використовувати однакову IDE всередині команди.
